"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("path-to-regexp"),o={go:function(e){window.history.pushState({pagex:!0,path:e},"",e),dispatchEvent(new PopStateEvent("popstate",{state:{pagex:!0,path:e}}))},reload:function(){dispatchEvent(new PopStateEvent("popstate",{state:{path:window.location.pathname,pagex:!0}}))},back:function(){return window.history.back()},forward:function(){return window.history.forward()}};function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u={isMatch:function(e,t){var r=n.match(e,{decode:decodeURIComponent})(t);return r?r.params:null},parseQuery:function(e){if(void 0===e&&(e=window.location.search),!e)return{};for(var t=e.substring(1).split("&"),r={},n=0;n<t.length;n++){var o=t[n].split("=");r[o[0]]=o[1],r[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return r}},s={currentGroup:null,groups:new Map,actives:new Map},c=function(e){var r=t.useId(),n=t.useState(0),o=n[0],c=n[1],i=t.useMemo((function(){return s.currentGroup}),[]);t.useMemo((function(){s.currentGroup=r,s.groups.set(r,a({},e,{dispatch:function(){},routes:new Map}))}),[]),t.useEffect((function(){s.currentGroup=i;var e=s.groups.get(r);return e&&s.groups.set(r,a({},e,{dispatch:function(){return c(Math.random())}})),function(){s.groups.delete(r)}}),[]),t.useEffect((function(){var e=s.groups.get(r);if(e){var t=!1;e.routes.forEach((function(r,n){var o=u.isMatch(e.basepath?""+e.basepath+r.path:r.path,window.location.pathname)||!1;(o||r.params)&&(e.routes.set(n,a({},r,{params:o})),r.dispatch()),!t&&o&&(e.onFound&&e.onFound(r),t=!0)})),t||e.onError&&e.onError()}}),[o])},i=function(e){var r,n=t.useId(),o=t.useState(0),a=o[0],c=o[1],i=t.useMemo((function(){return s.currentGroup}),[]),p=t.useMemo((function(){return i&&s.groups.get(i)}),[]);t.useMemo((function(){p&&p.routes.set(n,{dispatch:function(){},path:e,params:!1})}),[]);var f=t.useMemo((function(){return u.isMatch(e,window.location.pathname)||!1}),[a]);return t.useEffect((function(){return p&&p.routes.set(n,{dispatch:function(){return c(Math.random())},path:e,params:f}),function(){p&&p.routes.delete(n)}}),[]),p&&(null==(r=p.routes.get(n))?void 0:r.params)};window.addEventListener("popstate",(function(){s.groups.forEach((function(e){return e.dispatch()}))}));var p=["children"],f=u.parseQuery;exports.Link=function(e){var r=e.href,n=e.children,u=e.label;return t.createElement(e.component||"a",a({},!1!==e.noHref?{href:r}:{},{onClick:function(e){e.preventDefault(),o.go(r)}}),n||u)},exports.Navigate=o,exports.Parser=u,exports.Route=function(e){var t=e.render,n=i(e.path);return n?r.createElement(t,{params:n}):r.createElement(r.Fragment,null)},exports.Routes=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(o[r]=e[r]);return o}(e,p);return c(n),r.createElement(r.Fragment,null,t)},exports.core=s,exports.useGroup=c,exports.useQuery=f,exports.useRoute=i;
//# sourceMappingURL=react-pagex.cjs.production.min.js.map
